
<div id="ab">This is my default offer, using the existing copy.</div>
<script type="text/javascript">
var s = document.createElement('script');
s.src = 'https://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/md5.js';
s.onload = function () {
      function add(x, y, base) {
        var z = [];
        var n = Math.max(x.length, y.length);
        var carry = 0;
        var i = 0;
        while (i < n || carry) {
          var xi = i < x.length ? x[i] : 0;
          var yi = i < y.length ? y[i] : 0;
          var zi = carry + xi + yi;
          z.push(zi % base);
          carry = Math.floor(zi / base);
          i++;
        }
        return z;
      }

      function multiplyByNumber(num, x, base) {
        if (num < 0) return null;
        if (num == 0) return [];

        var result = [];
        var power = x;
        while (true) {
          if (num & 1) {
            result = add(result, power, base);
          }
          num = num >> 1;
          if (num === 0) break;
          power = add(power, power, base);
        }

        return result;
      }

      function parseToDigitsArray(str, base) {
        var digits = str.split('');
        var ary = [];
        for (var i = digits.length - 1; i >= 0; i--) {
          var n = parseInt(digits[i], base);
          if (isNaN(n)) return null;
          ary.push(n);
        }
        return ary;
      }

      function convertBase(str, fromBase, toBase) {
        var digits = parseToDigitsArray(str, fromBase);
        if (digits === null) return null;

        var outArray = [];
        var power = [1];
        for (var i = 0; i < digits.length; i++) {
          // invariant: at this point, fromBase^i = power
          if (digits[i]) {
            outArray = add(outArray, multiplyByNumber(digits[i], power, toBase), toBase);
          }
          power = multiplyByNumber(fromBase, power, toBase);
        }

        var out = '';
        for (var i = outArray.length - 1; i >= 0; i--) {
          out += outArray[i].toString(toBase);
        }
        return out;
      }

      function decToHex(decStr) {
        var hex = convertBase(decStr, 10, 16);
        return hex ? '0x' + hex : null;
      }

      function hexToDec(hexStr) {
        if (hexStr.substring(0, 2) === '0x') hexStr = hexStr.substring(2);
        hexStr = hexStr.toLowerCase();
        return convertBase(hexStr, 16, 10);
      }

      function str_or_null(x) {
        return x === null ? 'null' : x;
      }

      // "1.234e+5" -> "12340"
      function expandExponential(x) {
        var pos = x.indexOf("e");
        if (pos === -1) pos = x.indexOf("E");
        if (pos === -1) return x;

        var base = x.substring(0, pos);
        var pow = parseInt(x.substring(pos + 1), 10);
        if (pow < 0) return x;  // not supported.

        var dotPos = base.indexOf('.');
        if (dotPos === -1) dotPos = base.length;

        var ret = base.replace('.', '');
        while (ret.length < dotPos + pow) ret += '0';
        return ret;
      }

      function boldDifference(correct, actual) {
        for (var i = 0, j = 0; i < correct.length && j < actual.length; i++, j++) {
          if (correct[i] !== actual[j]) {
            break;
          }
        }
        if (j < actual.length) {
          return actual.substring(0, j) + '<b>' + actual.substring(j) + '</b>';
        } else {
          return actual;
        }
      }

      function hashme(input) {
        if (input) {
          var aDec = str_or_null(hexToDec(String(CryptoJS.MD5(input))));
          aDec = String(aDec).slice(-2);
          return aDec;
        }
      }

      function viewSource() {
        window.location = 'view-source:' + window.location.href;
      }


      //Calculate split and display A/B appropriately
      var percentage = hashme(document.getElementsByClassName('act')['accountForm'].childNodes[1].children[3].innerHTML);
      console.log("Your A/B split is: " + percentage);
      if (percentage >= 50) {

          // Override the Storefront design
          document.getElementsByClassName('bdy-content-aside')[0].children[0].style.display = "none";
          document.getElementsByClassName('bdy-content-aside')[0].children[1].style.display = "none";
          document.getElementsByClassName('off-creative')[0].style.display = "none";
          document.getElementsByClassName('off-member')[0].style.display = "none";
          document.getElementsByClassName('off-quantities-options-select')[0].setAttribute('onchange', "javascript:document.getElementsByClassName('bdy-content-aside')[0].children[0].style.display = 'inherit';");
      }
};
document.head.appendChild(s);
</script>

